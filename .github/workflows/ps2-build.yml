name: Build PS2 Homebrew

on: 
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build-ps2:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout c√≥digo
      uses: actions/checkout@v4
      
    - name: Compilar para PS2
      run: |
        echo "üî® Compilando Hello World para PS2..."
        docker run --rm -v $(pwd):/src ps2dev/ps2dev \
          /usr/local/ps2dev/ee/bin/ee-gcc -O2 -G0 -Wall \
          -o /src/hello_world.elf /src/main.c \
          -lc -lkernel -lsifrpc -ldebug
        
    - name: Verificar ELF
      run: |
        echo "üìÅ Arquivos gerados:"
        ls -la *.elf
        echo "üîç Informa√ß√µes do ELF:"
        file hello_world.elf
        
    - name: Upload do ELF
      uses: actions/upload-artifact@v4
      with:
        name: ps2-homebrew
        path: hello_world.elf
